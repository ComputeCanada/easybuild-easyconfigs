easyblock = 'Tarball'

name = 'MetaBAT'
version = '2.12.1'
versionprefix = 'static-binary-linux-x64'

homepage = 'https://bitbucket.org/berkeleylab/metabat'
description = """MetaBAT: A robust statistical framework for reconstructing genomes from metagenomic data"""

toolchain = {'name': 'dummy', 'version': 'dummy'}

# https://bitbucket.org/berkeleylab/metabat/downloads/metabat-static-binary-linux-x64_v2.12.1.tar.gz 
source_urls = ['https://bitbucket.org/berkeleylab/metabat/downloads']
sources = ['metabat-%(versionprefix)s_v%(version)s.tar.gz']

keepsymlinks = True
postinstallcmds = [
     'chmod a+rx %(installdir)s/aggregateBinDepths.pl',
     'chmod a+rx %(installdir)s/aggregateContigOverlapsByBin.pl',
     'chmod a+rx %(installdir)s/contigOverlaps',
     'chmod a+rx %(installdir)s/jgi_summarize_bam_contig_depths',
     'chmod a+r %(installdir)s/Legal.txt',
     'chmod a+r %(installdir)s/license.txt',
     'chmod a+rx %(installdir)s/metabat1',
     'chmod a+rx %(installdir)s/metabat2',
     'chmod a+r %(installdir)s/README.md',
     'chmod a+rx %(installdir)s/runMetaBat.sh'
]

sanity_check_paths = {
    'files': [
        'aggregateBinDepths.pl',
        'aggregateContigOverlapsByBin.pl',
        'contigOverlaps',
        'jgi_summarize_bam_contig_depths',
        'Legal.txt',
        'license.txt',
        'metabat',
        'metabat1',
        'metabat2',
        'README.md',
        'runMetaBat.sh'
    ],
    'dirs': [],
}

moduleclass = 'bio'
