# Built with EasyBuild version 3.6.1-r7cc8e8f5644ea63bcb902c6179dcffbb89cac49a on 2018-07-10_19-57-04
easyblock = 'MakeCp'
name = 'orthomcl'
version = '2.0.9'

homepage = 'http://orthomcl.org/'
description = "OrthoMCL is a genome-scale algorithm for grouping orthologous protein sequences."

toolchain = SYSTEM

sources = ['%(name)sSoftware-v%(version)s.tar.gz']
source_urls = ['http://%(name)s.org/common/downloads/software/v2.0/']

builddependencies = [('MCL','14.137-GCC-9.3.0')]
patches = ['orthomcl-2.0.9.patch']
skipsteps = ['configure', 'build']
modluafooter = """
depends_on("perl")
"""
modextrapaths = {'PERL5LIB': 'lib/perl'}
#sanity_check_commands = [('perl', '-e "use OrthoMCLEngine::Main::Base"')]
#install_cmd = 'cp -r %(builddir)s/* %(installdir)s'
files_to_copy = [(['bin/orthomclAdjustFasta', 'bin/orthomclBlastParser', 'bin/orthomclDropSchema',
                   'bin/orthomclDumpPairsFiles', 'bin/orthomclExtractProteinIdsFromGroupsFile', 'bin/orthomclExtractProteinPairsFromGroupsFile',
                   'bin/orthomclFilterFasta', 'bin/orthomclInstallSchema', 'bin/orthomclInstallSchema.sql', 'bin/orthomclLoadBlast',
                   'bin/orthomclLoadBlast.sql', 'bin/orthomclMclToGroups', 'bin/orthomclPairs', 'bin/orthomclReduceFasta', 'bin/orthomclReduceGroups',
                   'bin/orthomclRemoveIdenticalGroups', 'bin/orthomclSingletons', 'bin/orthomclSortGroupMembersByScore', 'bin/orthomclSortGroupsFile'], 'bin'), 
                   ('lib'), ('config'), ('doc')]
sanity_check_paths = {
    'files': ['bin/orthomclAdjustFasta', 'bin/orthomclBlastParser', 'bin/orthomclDropSchema', 'bin/orthomclDumpPairsFiles', 'bin/orthomclExtractProteinIdsFromGroupsFile', 'bin/orthomclExtractProteinPairsFromGroupsFile', 'bin/orthomclFilterFasta', 'bin/orthomclInstallSchema', 'bin/orthomclLoadBlast', 'bin/orthomclMclToGroups', 'bin/orthomclPairs', 'bin/orthomclReduceFasta', 'bin/orthomclReduceGroups', 'bin/orthomclRemoveIdenticalGroups', 'bin/orthomclSingletons', 'bin/orthomclSortGroupMembersByScore', 'bin/orthomclSortGroupsFile'],
    'dirs': ['lib/perl/OrthoMCLEngine'],
}

moduleclass = 'bio'
