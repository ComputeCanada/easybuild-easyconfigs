easyblock = 'MakeCp'

name = 'HISAT2'
version = '2.2.0'

homepage = 'https://ccb.jhu.edu/software/hisat2/index.shtml'
description = """HISAT2 is a fast and sensitive alignment program for mapping next-generation sequencing reads
 (both DNA and RNA) against the general human population (as well as against a single reference genome)."""

toolchain = {'version': '2018.3', 'name': 'iccifort'}

#local_srcversion = '%s' % version.replace('.', '')
#source_urls = ['https://cloud.biohpc.swmed.edu/index.php/s/%%(namelower)s-%s-source/download' % local_srcversion]
#sources = ['%(namelower)s-%(version)s-source.zip']
#checksums = []

# The website has changed and automatic download did not work.
# Download from:
# https://cloud.biohpc.swmed.edu/index.php/s/hisat2-220-source/download

sources = ['%(namelower)s-%(version)s-source.zip']
checksums = ['f0ea6b853cc4d843d6ea7ae59d7dc78f']

dependencies = [
    ('SAMtools', '1.3.1'),
]

local_binaries = [
    "hisat2", "hisat2-align-l", "hisat2-align-s", "hisat2-build", "hisat2-build-l", 
    "hisat2-build-s", "hisat2-inspect", "hisat2-inspect-s", "hisat2-inspect-l",
]

files_to_copy = [(local_binaries, 'bin')]

sanity_check_paths = {
    'files': ['bin/%s' % x for x in local_binaries],
    'dirs': [],
}

moduleclass = 'bio'
