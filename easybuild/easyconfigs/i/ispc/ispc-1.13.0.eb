easyblock = 'CMakeMake'

name = 'ispc'
version = '1.13.0'

homepage = 'http://ispc.github.io/ , https://github.com/ispc/ispc/'
description = """Intel SPMD Program Compilers; An open-source compiler for high-performance
 SIMD programming on the CPU. ispc is a compiler for a variant of the C programming language,
 with extensions for 'single program, multiple data' (SPMD) programming.
 Under the SPMD model, the programmer writes a program that generally appears
 to be a regular serial program, though the execution model is actually that
 a number of program instances execute in parallel on the hardware."""

toolchain = SYSTEM

source_urls = ['https://github.com/%(name)s/%(name)s/archive']
sources = ['v%(version)s.tar.gz']
patches = ['ispc-disable-32bit.patch']
checksums = [
    'cc74c4c490ddf4e0a63f01948ec8d6eb575d85ab5932d30ca4ad01c0e8f079ce',  # v1.13.0.tar.gz
    '00e99fa033f0df900c4c2045c73bdf5dca967a077313b93dcd76729cd4b5cebe',  # ispc-disable-32bit.patch
]

builddependencies = [
    ('Clang', '9.0.1'),
]

configopts = '-DISPC_INCLUDE_TESTS=0 -DARM_ENABLED=0'

sanity_check_paths = {
    'files': ["bin/ispc"],
    'dirs': []
}

moduleclass = 'compiler'
