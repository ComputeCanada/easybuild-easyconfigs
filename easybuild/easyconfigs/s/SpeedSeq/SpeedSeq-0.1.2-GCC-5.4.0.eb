# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Maxime Boissonneault
# Swiss Institute of Bioinformatics
# Biozentrum - University of Basel
# Modified by: Adam Huffman
# The Francis Crick Institute

easyblock = 'MakeCp'

name = 'SpeedSeq'
version = '0.1.2'

homepage = 'https://github.com/hall-lab/speedseq'
description = """A flexible framework for rapid genome analysis and interpretation"""

toolchain = {'name': 'GCC', 'version': '5.4.0'}
toolchainopts = {'pic': True}

# Create an archive manually first with
# git clone --branch v0.1.2 --recursive https://github.com/hall-lab/speedseq.git
# tar cfvj speedseq-0.1.2.tar.bz2 --exclude-vcs speedseq
sources = ['%(namelower)s-%(version)s.tar.bz2']
#source_urls = ['https://github.com/hall-lab/speedseq/archive/']

builddependencies = [
    ('Python', '2.7.14'),
]

dependencies = [
    ('ROOT', '5.34.36'),
    ('SAMtools', '1.5'),
]
buildininstalldir = True
skipsteps = ['install']

files_to_copy = [
    "", #"speedseq/*",
]

sanity_check_paths = {
    'files': ["speedseq/bin/speedseq",
              "speedseq/bin/bamcleanheader.py",
              "speedseq/bin/cnvnator_wrapper.py",
              "speedseq/bin/tabix",
             ],
    'dirs': [],
}
modextrapaths = { 'PATH': 'speedseq/bin' }
moduleclass = 'bio'
