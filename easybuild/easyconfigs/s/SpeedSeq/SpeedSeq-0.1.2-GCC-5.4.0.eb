# This file is an EasyBuild reciPY as per https://github.com/hpcugent/easybuild
# Author: Pablo Escobar Lopez
# Swiss Institute of Bioinformatics
# Biozentrum - University of Basel
# Modified by: Adam Huffman
# The Francis Crick Institute

easyblock = 'MakeCp'

name = 'SpeedSeq'
version = '0.1.2'

homepage = 'https://github.com/hall-lab/speedseq'
description = """A flexible framework for rapid genome analysis and interpretation"""

toolchain = {'name': 'GCC', 'version': '5.4.0'}
toolchainopts = {'pic': True}

#master.zip does not work
sources = ['master.zip']
source_urls = ['https://github.com/hall-lab/speedseq/archive/']

unpack_options = '&& git clone --recursive https://github.com/hall-lab/speedseq'

prebuildopts = 'cd speedseq && '
dependencies = [
    ('ROOT', '6.08.02'),
    ('SAMtools', '1.5'),
]

files_to_copy = [
    "speedseq/*",
]

sanity_check_paths = {
    'files': ["bin/speedseq",
              "bin/bamcleanheader.py",
              "bin/cnvnator_wrapper.py",
              "bin/tabix",
             ],
    'dirs': [],
}

moduleclass = 'bio'
